# **Физическая симуляция сетки из пружин**

### Оглавление
- **[Условия задачи](#Условия)**
- **[Вопрос задачи](#Задача)**
- **[Зависимости](#Зависимости)**
- **[Установка на Linux](#Установка-на-Linux)**
- **[Кратко об алгоритме](#Алгоритм)**
- **[Краткая справка](#Краткая-справка)**
- **[Запуск и управление](#Запуск-и-управление)**

### Условия
Есть сетка, состоящая из пружин и соединений. Все крайние узлы зафиксированы, остальные - нет. Мы оттягиваем какой-то узел и отпускаем.

### Задача
Рассчитывать дальнейшее поведение сетки в условиях отсутствия или наличия сопративления воздуха.

### Зависимости
`sfml`, `g++`, `make`

### Установка на Linux
`sudo apt install libsfml-dev make g++`
`git clone https://github.com/pErfEcto2/math_and_phisics2022`
`cd math_and_phisics`
Разработка велась на Linux(Ubuntu 20.04), поэтому команда для установки только для данной операционной системы.

### Алгоритм
- Вычисляем начальные расстояния между узлами по вертикали и горизонтали;
- Каждый кадр для каждого узла вычисляем разницу между текущим и начальным положением;
- Разницу подставляем в формулу F = K * dP, где F - сила, действующая на узел, K - коеффициент упругости пружины, dP - разница, вычисленная на предыдущем шаге;
- Перемещаем все узлы;

### Краткая справка

##### Переменные:
- **WIDTH** и **HEIGHT** - количество узлов по горизонтали и вертикале соотвественно (если поставить значения меньше 3, то сетка двигаться не будет);
- **offset** - сдвиг всех объектов относительно верхней и левой частей экрана в пикселях;
- **size** - размер одного узла в пикселях;
- **K** - коеффициент упругости пружины;
- **airDencity** - сопротивление воздуха;
- **dTime** - время между кадрами, используемое в рассчетах;

##### Классы:
- **Knot** - узел ввиде квадрата, на который действуют силы;
- **Connection** - отрезок, соединяющий соседние узлы;
- **FPS** - используеться для вычисления fps в программе;

##### Функции:
- **float getDistance** - возвращает расстояние между двумя точками;
- **float getVectorLength** - находит длину вектора;
- **sf::Vector2f abs** - перегрузка функции abs для типа sf::Vector2f;
- **double clamp** - ограничивает вещественное число заданным минимумом и максимумом;
- **sf::Vector2f clamp** - перегрузка функции clamp для типа sf::Vector2f;
- **sf::Text textInit** - инициализирует текст и возвращает готовый к выводу на экран объект;
- **sf::Vector2f const getScreenSize** - возвращает размер экрана в пикселях;

### Запуск и управление
##### Управление:
- Чтобы закрепить или открепить узел, наведи на него курсор и нажми ПКМ;
- Чтобы переместить узел, наведи на него курсор, зажми ЛКМ и перетяни его;
- Латинская "A" включает и выключает сопротивление воздуха;
- "R" выставляет все узлы и соединения на исходные позиции;
- Латинская "С" включает и выключает очистку экрана;
- Нажми "ESC" для выхода из программы;
- С помощью колёсика мыши можно менять переменную dTime;

##### Запуск
- `make bulid`
- `./net`

Автор - Ярошевский Михаил














Phisics simulation

To start:

`sudo apt install libsfml-dev make g++`

`git clone https://github.com/pErfEcto2/math_and_phisics2022`

`cd math_and_phisics`

`make build`

`./net`

(Tested on Ubuntu 20.04)